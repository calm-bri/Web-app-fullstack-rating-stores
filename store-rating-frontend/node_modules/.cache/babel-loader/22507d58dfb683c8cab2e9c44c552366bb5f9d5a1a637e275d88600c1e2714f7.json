{"ast":null,"code":"var _jsxFileName = \"C:\\\\Assignment_Project_App\\\\Assignment_Roxiler\\\\store-rating-frontend\\\\src\\\\pages\\\\Dashboard\\\\OwnerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport api from \"../../api/api\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport RatingModal from \"../../components/RatingModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OwnerDashboard = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [stores, setStores] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedStore, setSelectedStore] = useState(null);\n  const [rating, setRating] = useState(5);\n  const [comment, setComment] = useState(\"\");\n  useEffect(() => {\n    const fetchStores = async () => {\n      try {\n        const response = await api.get(\"/stores\");\n        // ✅ Only show stores owned by this user\n        setStores(response.data.data.filter(s => s.ownerId === (user === null || user === void 0 ? void 0 : user.id)));\n      } catch (error) {\n        console.error(\"Error fetching stores:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (user !== null && user !== void 0 && user.id) {\n      fetchStores();\n    }\n  }, [user === null || user === void 0 ? void 0 : user.id]); // ✅ dependency fixed\n\n  const createStore = async storeData => {\n    try {\n      await api.post(\"/stores\", storeData);\n      // refresh\n      setStores(prev => [...prev, storeData]);\n    } catch (error) {\n      console.error(\"Error creating store:\", error);\n    }\n  };\n  const updateStore = async (storeId, updatedData) => {\n    try {\n      await api.put(`/stores/${storeId}`, updatedData);\n      setStores(prev => prev.map(s => s.id === storeId ? {\n        ...s,\n        ...updatedData\n      } : s));\n    } catch (error) {\n      console.error(\"Error updating store:\", error);\n    }\n  };\n  const deleteStore = async storeId => {\n    try {\n      await api.delete(`/stores/${storeId}`);\n      setStores(prev => prev.filter(s => s.id !== storeId));\n    } catch (error) {\n      console.error(\"Error deleting store:\", error);\n    }\n  };\n  const resetModal = () => {\n    setSelectedStore(null);\n    setRating(5);\n    setComment(\"\");\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Owner Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RatingModal, {\n      store: selectedStore,\n      rating: rating,\n      comment: comment,\n      setRating: setRating,\n      setComment: setComment,\n      onSubmit: resetModal,\n      onClose: resetModal,\n      isUpdating: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"My Stores\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stores-grid\",\n      children: stores.map(store => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"store-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: store.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: store.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Average Rating: \", store.averageRating || 0, \" \\u2B50 (\", store.totalRatings || 0, \" ratings)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateStore(store.id, {\n            name: \"Updated Name\"\n          }),\n          className: \"btn btn-primary\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteStore(store.id),\n          className: \"btn btn-danger\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)]\n      }, store.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => createStore({\n        name: \"New Store\",\n        address: \"Somewhere\"\n      }),\n      className: \"btn btn-success\",\n      children: \"+ Add Store\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(OwnerDashboard, \"UexM16J2W6u8uEGsOi5LiuTOrm4=\");\n_c = OwnerDashboard;\nexport default OwnerDashboard;\nvar _c;\n$RefreshReg$(_c, \"OwnerDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useContext","api","AuthContext","RatingModal","jsxDEV","_jsxDEV","OwnerDashboard","_s","user","stores","setStores","loading","setLoading","selectedStore","setSelectedStore","rating","setRating","comment","setComment","fetchStores","response","get","data","filter","s","ownerId","id","error","console","createStore","storeData","post","prev","updateStore","storeId","updatedData","put","map","deleteStore","delete","resetModal","children","fileName","_jsxFileName","lineNumber","columnNumber","className","store","onSubmit","onClose","isUpdating","name","address","averageRating","totalRatings","onClick","_c","$RefreshReg$"],"sources":["C:/Assignment_Project_App/Assignment_Roxiler/store-rating-frontend/src/pages/Dashboard/OwnerDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport api from \"../../api/api\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport RatingModal from \"../../components/RatingModal\";\r\n\r\nconst OwnerDashboard = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const [stores, setStores] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [selectedStore, setSelectedStore] = useState(null);\r\n  const [rating, setRating] = useState(5);\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchStores = async () => {\r\n      try {\r\n        const response = await api.get(\"/stores\");\r\n        // ✅ Only show stores owned by this user\r\n        setStores(response.data.data.filter((s) => s.ownerId === user?.id));\r\n      } catch (error) {\r\n        console.error(\"Error fetching stores:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user?.id) {\r\n      fetchStores();\r\n    }\r\n  }, [user?.id]); // ✅ dependency fixed\r\n\r\n  const createStore = async (storeData) => {\r\n    try {\r\n      await api.post(\"/stores\", storeData);\r\n      // refresh\r\n      setStores((prev) => [...prev, storeData]);\r\n    } catch (error) {\r\n      console.error(\"Error creating store:\", error);\r\n    }\r\n  };\r\n\r\n  const updateStore = async (storeId, updatedData) => {\r\n    try {\r\n      await api.put(`/stores/${storeId}`, updatedData);\r\n      setStores((prev) =>\r\n        prev.map((s) => (s.id === storeId ? { ...s, ...updatedData } : s))\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error updating store:\", error);\r\n    }\r\n  };\r\n\r\n  const deleteStore = async (storeId) => {\r\n    try {\r\n      await api.delete(`/stores/${storeId}`);\r\n      setStores((prev) => prev.filter((s) => s.id !== storeId));\r\n    } catch (error) {\r\n      console.error(\"Error deleting store:\", error);\r\n    }\r\n  };\r\n\r\n  const resetModal = () => {\r\n    setSelectedStore(null);\r\n    setRating(5);\r\n    setComment(\"\");\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h2>Owner Dashboard</h2>\r\n\r\n      {/* Rating Modal (reused) */}\r\n      <RatingModal\r\n        store={selectedStore}\r\n        rating={rating}\r\n        comment={comment}\r\n        setRating={setRating}\r\n        setComment={setComment}\r\n        onSubmit={resetModal}\r\n        onClose={resetModal}\r\n        isUpdating={false}\r\n      />\r\n\r\n      <h3>My Stores</h3>\r\n      <div className=\"stores-grid\">\r\n        {stores.map((store) => (\r\n          <div key={store.id} className=\"store-card\">\r\n            <h4>{store.name}</h4>\r\n            <p>{store.address}</p>\r\n            <p>\r\n              Average Rating: {store.averageRating || 0} ⭐ (\r\n              {store.totalRatings || 0} ratings)\r\n            </p>\r\n\r\n            <button\r\n              onClick={() => updateStore(store.id, { name: \"Updated Name\" })}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              Edit\r\n            </button>\r\n            <button\r\n              onClick={() => deleteStore(store.id)}\r\n              className=\"btn btn-danger\"\r\n            >\r\n              Delete\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <button\r\n        onClick={() => createStore({ name: \"New Store\", address: \"Somewhere\" })}\r\n        className=\"btn btn-success\"\r\n      >\r\n        + Add Store\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OwnerDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}