{"ast":null,"code":"var _jsxFileName = \"C:\\\\Assignment_Project_App\\\\Assignment_Roxiler\\\\store-rating-frontend\\\\src\\\\pages\\\\Dashboard\\\\UserDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport api from \"../../api/api\";\nimport AnalyticsCard from \"../../components/AnalyticsCard\";\nimport StoreList from \"../../components/StoreList\";\nimport RatingList from \"../../components/RatingList\";\nimport RatingModal from \"../../components/RatingModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserDashboard = () => {\n  _s();\n  const [stats, setStats] = useState({\n    ratings: 0,\n    unrated: 0,\n    avgRating: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  // Rating modal state\n  const [ratingStore, setRatingStore] = useState(null);\n  const [rating, setRating] = useState(5);\n  const [comment, setComment] = useState(\"\");\n  const [isUpdating, setIsUpdating] = useState(false);\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const res = await api.get(\"/dashboard/user/stats\");\n        setStats(res.data.data || {\n          ratings: 0,\n          unrated: 0,\n          avgRating: 0\n        });\n      } catch (err) {\n        console.error(\"Error fetching user stats:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStats();\n  }, []);\n  const handleRate = store => {\n    setRatingStore(store);\n    setRating(5);\n    setComment(\"\");\n    setIsUpdating(false);\n  };\n  const handleSubmitRating = async () => {\n    try {\n      if (isUpdating) {\n        // Update existing rating logic here if needed\n      } else {\n        await api.post(\"/ratings\", {\n          storeId: ratingStore.id,\n          rating,\n          comment\n        });\n      }\n      setRatingStore(null);\n      // Optionally refresh stats or lists here\n    } catch (err) {\n      console.error(\"Error submitting rating:\", err);\n      alert(\"Failed to submit rating. Please try again.\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"analytics-grid\",\n      children: [/*#__PURE__*/_jsxDEV(AnalyticsCard, {\n        title: \"My Ratings\",\n        value: stats.ratings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnalyticsCard, {\n        title: \"Unrated Stores\",\n        value: stats.unrated\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnalyticsCard, {\n        title: \"Avg Rating Given\",\n        value: `${stats.avgRating.toFixed(1)} ⭐`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"My Rated Stores\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RatingList, {\n      endpoint: \"/ratings/user\",\n      canEdit: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"All Stores\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StoreList, {\n      endpoint: \"/stores\",\n      canRate: true,\n      onRate: handleRate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RatingModal, {\n      store: ratingStore,\n      rating: rating,\n      comment: comment,\n      setRating: setRating,\n      setComment: setComment,\n      onSubmit: handleSubmitRating,\n      onClose: () => setRatingStore(null),\n      isUpdating: isUpdating\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(UserDashboard, \"EwX9QIul8Hnpwm2/F4uDVALhTk0=\");\n_c = UserDashboard;\nexport default UserDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserDashboard\");","map":{"version":3,"names":["React","useState","useEffect","api","AnalyticsCard","StoreList","RatingList","RatingModal","jsxDEV","_jsxDEV","UserDashboard","_s","stats","setStats","ratings","unrated","avgRating","loading","setLoading","ratingStore","setRatingStore","rating","setRating","comment","setComment","isUpdating","setIsUpdating","fetchStats","res","get","data","err","console","error","handleRate","store","handleSubmitRating","post","storeId","id","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","title","value","toFixed","endpoint","canEdit","canRate","onRate","onSubmit","onClose","_c","$RefreshReg$"],"sources":["C:/Assignment_Project_App/Assignment_Roxiler/store-rating-frontend/src/pages/Dashboard/UserDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport api from \"../../api/api\";\r\nimport AnalyticsCard from \"../../components/AnalyticsCard\";\r\nimport StoreList from \"../../components/StoreList\";\r\nimport RatingList from \"../../components/RatingList\";\r\nimport RatingModal from \"../../components/RatingModal\";\r\n\r\nconst UserDashboard = () => {\r\n  const [stats, setStats] = useState({ ratings: 0, unrated: 0, avgRating: 0 });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Rating modal state\r\n  const [ratingStore, setRatingStore] = useState(null);\r\n  const [rating, setRating] = useState(5);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      try {\r\n        const res = await api.get(\"/dashboard/user/stats\");\r\n        setStats(res.data.data || { ratings: 0, unrated: 0, avgRating: 0 });\r\n      } catch (err) {\r\n        console.error(\"Error fetching user stats:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const handleRate = (store) => {\r\n    setRatingStore(store);\r\n    setRating(5);\r\n    setComment(\"\");\r\n    setIsUpdating(false);\r\n  };\r\n\r\n  const handleSubmitRating = async () => {\r\n    try {\r\n      if (isUpdating) {\r\n        // Update existing rating logic here if needed\r\n      } else {\r\n        await api.post(\"/ratings\", {\r\n          storeId: ratingStore.id,\r\n          rating,\r\n          comment,\r\n        });\r\n      }\r\n      setRatingStore(null);\r\n      // Optionally refresh stats or lists here\r\n    } catch (err) {\r\n      console.error(\"Error submitting rating:\", err);\r\n      alert(\"Failed to submit rating. Please try again.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h2>User Dashboard</h2>\r\n      <div className=\"analytics-grid\">\r\n        <AnalyticsCard title=\"My Ratings\" value={stats.ratings} />\r\n        <AnalyticsCard title=\"Unrated Stores\" value={stats.unrated} />\r\n        <AnalyticsCard title=\"Avg Rating Given\" value={`${stats.avgRating.toFixed(1)} ⭐`} />\r\n      </div>\r\n\r\n      <h3>My Rated Stores</h3>\r\n      <RatingList endpoint=\"/ratings/user\" canEdit />\r\n\r\n      <h3>All Stores</h3>\r\n      <StoreList endpoint=\"/stores\" canRate onRate={handleRate} />\r\n\r\n      <RatingModal\r\n        store={ratingStore}\r\n        rating={rating}\r\n        comment={comment}\r\n        setRating={setRating}\r\n        setComment={setComment}\r\n        onSubmit={handleSubmitRating}\r\n        onClose={() => setRatingStore(null)}\r\n        isUpdating={isUpdating}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}